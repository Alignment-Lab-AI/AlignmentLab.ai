{"version":3,"sources":["../../../../../src/client/components/router-reducer/reducers/navigate-reducer.ts"],"names":["handleExternalUrl","navigateReducer","state","mutable","url","pendingPush","previousTree","tree","mpaNavigation","canonicalUrl","scrollableSegments","undefined","handleMutable","generateSegmentsFromPatch","flightRouterPatch","segments","segment","parallelRoutes","Object","keys","length","parallelRouteKey","parallelRoute","entries","childSegment","push","addRefetchToLeafSegments","newCache","currentCache","flightSegmentPath","treePatch","data","appliedPatch","status","CacheStates","READY","subTreeData","Map","segmentPathsToFill","map","segmentPaths","fillCacheWithDataProperty","action","isExternalUrl","navigateType","cache","shouldScroll","hash","href","createHrefFromUrl","prunePrefetchCache","prefetchCache","isForCurrentTree","JSON","stringify","preserveCustomHistoryState","toString","prefetchValues","get","fetchServerResponse","nextUrl","buildId","process","env","NODE_ENV","PrefetchKind","AUTO","newPrefetchValue","kind","TEMPORARY","prefetchTime","Date","now","treeAtTimeOfPrefetch","lastUsedTime","set","prefetchEntryCacheStatus","getPrefetchEntryCacheStatus","prefetchQueue","bump","then","flightData","canonicalUrlOverride","postponed","currentTree","flightDataPath","slice","flightSegmentPathWithLeadingEmpty","newTree","applyRouterStatePatchToTree","isNavigatingToNewRootLayout","applied","applyFlightData","PrefetchCacheEntryStatus","reusable","stale","hardNavigate","shouldHardNavigate","invalidateCacheBelowFlightSegmentPath","subSegment","scrollableSegmentPath","patchedTree","hashFragment"],"mappings":"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"}